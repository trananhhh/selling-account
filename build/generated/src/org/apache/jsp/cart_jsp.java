package org.apache.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import model.Item;
import java.util.ArrayList;
import java.util.List;
import model.Plan;

public final class cart_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final JspFactory _jspxFactory = JspFactory.getDefaultFactory();

  private static java.util.List<String> _jspx_dependants;

  private org.glassfish.jsp.api.ResourceInjector _jspx_resourceInjector;

  public java.util.List<String> getDependants() {
    return _jspx_dependants;
  }

  public void _jspService(HttpServletRequest request, HttpServletResponse response)
        throws java.io.IOException, ServletException {

    PageContext pageContext = null;
    HttpSession session = null;
    ServletContext application = null;
    ServletConfig config = null;
    JspWriter out = null;
    Object page = this;
    JspWriter _jspx_out = null;
    PageContext _jspx_page_context = null;

    try {
      response.setContentType("text/html;charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;
      _jspx_resourceInjector = (org.glassfish.jsp.api.ResourceInjector) application.getAttribute("com.sun.appserv.jsp.resource.injector");

      out.write("\r\n");
      out.write("    \r\n");
      out.write("        \r\n");
      out.write("            \r\n");
      out.write("                \r\n");
      out.write("                    \r\n");
      out.write("                        <!DOCTYPE html>\r\n");
      out.write("                        <html>\r\n");
      out.write("\r\n");
      out.write("                        <head>\r\n");
      out.write("                            <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\r\n");
      out.write("                            <title>Giỏ hàng</title>\r\n");
      out.write("                            <link rel=\"stylesheet\" href=\"./css/base.css\">\r\n");
      out.write("                            <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css\"\r\n");
      out.write("                                rel=\"stylesheet\"\r\n");
      out.write("                                integrity=\"sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3\"\r\n");
      out.write("                                crossorigin=\"anonymous\" />\r\n");
      out.write("                            <link rel=\"stylesheet\"\r\n");
      out.write("                                href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.8.1/font/bootstrap-icons.min.css\"\r\n");
      out.write("                                integrity=\"sha512-Oy+sz5W86PK0ZIkawrG0iv7XwWhYecM3exvUtMKNJMekGFJtVAhibhRPTpmyTj8+lJCkmWfnpxKgT2OopquBHA==\"\r\n");
      out.write("                                crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\" />\r\n");
      out.write("                            <style>\r\n");
      out.write("                                .item-container {\r\n");
      out.write("                                    width: 500px;\r\n");
      out.write("                                    flex-direction: row;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .purchase-box {\r\n");
      out.write("                                    justify-content: flex-end;\r\n");
      out.write("                                    padding-right: 8px;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                p {\r\n");
      out.write("                                    padding: 0;\r\n");
      out.write("                                    margin: 0;\r\n");
      out.write("                                    font-size: 24px;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .creditCardForm {\r\n");
      out.write("                                    max-width: 700px;\r\n");
      out.write("                                    background-color: #fff;\r\n");
      out.write("                                    margin: 100px auto;\r\n");
      out.write("                                    overflow: hidden;\r\n");
      out.write("                                    padding: 25px;\r\n");
      out.write("                                    color: #4c4e56;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .creditCardForm label {\r\n");
      out.write("                                    width: 100%;\r\n");
      out.write("                                    margin-bottom: 10px;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .creditCardForm .heading h1 {\r\n");
      out.write("                                    text-align: center;\r\n");
      out.write("                                    font-family: 'Open Sans', sans-serif;\r\n");
      out.write("                                    color: #4c4e56;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .creditCardForm .payment {\r\n");
      out.write("                                    float: left;\r\n");
      out.write("                                    font-size: 18px;\r\n");
      out.write("                                    padding: 10px 25px;\r\n");
      out.write("                                    margin-top: 20px;\r\n");
      out.write("                                    position: relative;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .creditCardForm .payment .form-group {\r\n");
      out.write("                                    float: left;\r\n");
      out.write("                                    margin-bottom: 15px;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .creditCardForm .payment .form-control {\r\n");
      out.write("                                    line-height: 40px;\r\n");
      out.write("                                    height: auto;\r\n");
      out.write("                                    padding: 0 16px;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .creditCardForm .owner {\r\n");
      out.write("                                    width: 63%;\r\n");
      out.write("                                    margin-right: 10px;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .creditCardForm .CVV {\r\n");
      out.write("                                    width: 35%;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .creditCardForm #card-number-field {\r\n");
      out.write("                                    width: 100%;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .creditCardForm #expiration-date {\r\n");
      out.write("                                    width: 49%;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .creditCardForm #credit_cards {\r\n");
      out.write("                                    width: 50%;\r\n");
      out.write("                                    margin-top: 25px;\r\n");
      out.write("                                    text-align: right;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .creditCardForm #pay-now {\r\n");
      out.write("                                    width: 100%;\r\n");
      out.write("                                    margin-top: 25px;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .creditCardForm .payment .btn {\r\n");
      out.write("                                    width: 100%;\r\n");
      out.write("                                    margin-top: 3px;\r\n");
      out.write("                                    font-size: 24px;\r\n");
      out.write("                                    background-color: #2ec4a5;\r\n");
      out.write("                                    color: white;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .creditCardForm .payment select {\r\n");
      out.write("                                    padding: 10px;\r\n");
      out.write("                                    margin-right: 15px;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .transparent {\r\n");
      out.write("                                    opacity: 0.2;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                @media(max-width: 650px) {\r\n");
      out.write("\r\n");
      out.write("                                    .creditCardForm .owner,\r\n");
      out.write("                                    .creditCardForm .CVV,\r\n");
      out.write("                                    .creditCardForm #expiration-date,\r\n");
      out.write("                                    .creditCardForm #credit_cards {\r\n");
      out.write("                                        width: 100%;\r\n");
      out.write("                                    }\r\n");
      out.write("\r\n");
      out.write("                                    .creditCardForm #credit_cards {\r\n");
      out.write("                                        text-align: left;\r\n");
      out.write("                                    }\r\n");
      out.write("                                }\r\n");
      out.write("                            </style>\r\n");
      out.write("                            <link rel=\"stylesheet\"\r\n");
      out.write("                                href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css\"\r\n");
      out.write("                                integrity=\"sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==\"\r\n");
      out.write("                                crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\" />\r\n");
      out.write("                        </head>\r\n");
      out.write("\r\n");
      out.write("                        <body>\r\n");
      out.write("                            <div class=\"container\">\r\n");
      out.write("                                <h1>Giỏ hàng</h1>\r\n");
      out.write("                                <div class=\"item-list\">\r\n");
      out.write("                                    <a href=\"./plans\" id=\"back-btn\"><i class=\"fa-solid fa-arrow-left\"></i>Mua thêm</a>\r\n");
      out.write("                                    ");
 List<Item> listItems = (ArrayList) request.getAttribute("itemsInCart");
                                        for(Item i : listItems){
                                        Plan p = i.getPlan();
                                        int duration = i.getDuration();
                                        int idx = listItems.indexOf(i);
                                        
      out.write("\r\n");
      out.write("                                        <div class=\"item-container\" id=\"item-");
      out.print( idx );
      out.write("\">\r\n");
      out.write("                                            <div class=\"left-box\">\r\n");
      out.write("                                                <h3>\r\n");
      out.write("                                                    ");
      out.print( p.getName() );
      out.write("\r\n");
      out.write("                                                </h3>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                            <div class=\"right-box\">\r\n");
      out.write("                                                <span>\r\n");
      out.write("                                                    ");
      out.print( duration );
      out.write("\r\n");
      out.write("                                                </span> x\r\n");
      out.write("                                                <span>\r\n");
      out.write("                                                    ");
      out.print( p.getPrice() );
      out.write("\r\n");
      out.write("                                                </span>\r\n");
      out.write("                                                <h4 class=\"final-price\">\r\n");
      out.write("                                                    ");
      out.print( duration*p.getPrice() );
      out.write("\r\n");
      out.write("                                                </h4>\r\n");
      out.write("                                                <i class=\"fa-solid fa-trash-can remove-btn\"\r\n");
      out.write("                                                    onclick=\"removeItem(");
      out.print( idx );
      out.write(")\"></i>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("                                        ");
 } 
      out.write("\r\n");
      out.write("                                            <div class=\"purchase-box\">\r\n");
      out.write("                                                <p>Tổng cộng: </p>\r\n");
      out.write("                                                <h4 class=\"total\" id=\"total\"></h4>\r\n");
      out.write("                                                <p>vnd</p>\r\n");
      out.write("                                                <button id=\"purchase\" type=\"button\" class=\"btn btn-primary\"\r\n");
      out.write("                                                    data-bs-toggle=\"modal\" data-bs-target=\"#exampleModal\">\r\n");
      out.write("                                                    Thanh toán\r\n");
      out.write("                                                </button>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                </div>\r\n");
      out.write("                                <div class=\"modal fade\" id=\"exampleModal\" tabindex=\"-1\"\r\n");
      out.write("                                    aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n");
      out.write("                                    <div class=\"modal-dialog\">\r\n");
      out.write("                                        <div class=\"modal-content\">\r\n");
      out.write("                                            <div class=\"modal-header\">\r\n");
      out.write("                                                <h5 class=\"modal-title\" id=\"exampleModalLabel\">Set up your credit or\r\n");
      out.write("                                                    debit card</h5>\r\n");
      out.write("                                                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"\r\n");
      out.write("                                                    aria-label=\"Close\"></button>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                            <div class=\"modal-body\">\r\n");
      out.write("                                                <div class=\"container-fluid\">\r\n");
      out.write("                                                    <!--<div class=\"creditCardForm\">-->\r\n");
      out.write("                                                    <div class=\"payment\">\r\n");
      out.write("                                                        <form>\r\n");
      out.write("                                                            <div class=\"row mb-3\">\r\n");
      out.write("                                                                <div class=\"form-group owner col-8\">\r\n");
      out.write("                                                                    <!-- <label for=\"owner\">Owner</label> -->\r\n");
      out.write("                                                                    <input type=\"text\" class=\"form-control\" id=\"owner\"\r\n");
      out.write("                                                                        placeholder=\"Name\">\r\n");
      out.write("                                                                </div>\r\n");
      out.write("                                                                <div class=\"form-group CVV col-4\">\r\n");
      out.write("                                                                    <!-- <label for=\"cvv\">CVV</label> -->\r\n");
      out.write("                                                                    <input type=\"text\" class=\"form-control\" id=\"cvv\"\r\n");
      out.write("                                                                        placeholder=\"CVV\">\r\n");
      out.write("                                                                </div>\r\n");
      out.write("                                                            </div>\r\n");
      out.write("                                                            <div class=\"row mb-3\">\r\n");
      out.write("\r\n");
      out.write("                                                                <div class=\"form-group\" id=\"card-number-field\">\r\n");
      out.write("                                                                    <!-- <label for=\"cardNumber\">Card Number</label> -->\r\n");
      out.write("                                                                    <input type=\"text\" class=\"form-control\"\r\n");
      out.write("                                                                        id=\"cardNumber\" placeholder=\"Card Number\">\r\n");
      out.write("                                                                </div>\r\n");
      out.write("                                                            </div>\r\n");
      out.write("                                                            <div class=\"row mb-3\">\r\n");
      out.write("                                                                <div class=\"form-group col-6\" id=\"expiration-date\">\r\n");
      out.write("                                                                    <!-- <label>Expiration Date</label> -->\r\n");
      out.write("                                                                    <select>\r\n");
      out.write("                                                                        <option value=\"01\">January</option>\r\n");
      out.write("                                                                        <option value=\"02\">February </option>\r\n");
      out.write("                                                                        <option value=\"03\">March</option>\r\n");
      out.write("                                                                        <option value=\"04\">April</option>\r\n");
      out.write("                                                                        <option value=\"05\">May</option>\r\n");
      out.write("                                                                        <option value=\"06\">June</option>\r\n");
      out.write("                                                                        <option value=\"07\">July</option>\r\n");
      out.write("                                                                        <option value=\"08\">August</option>\r\n");
      out.write("                                                                        <option value=\"09\">September</option>\r\n");
      out.write("                                                                        <option value=\"10\">October</option>\r\n");
      out.write("                                                                        <option value=\"11\">November</option>\r\n");
      out.write("                                                                        <option value=\"12\">December</option>\r\n");
      out.write("                                                                    </select>\r\n");
      out.write("                                                                    <select>\r\n");
      out.write("                                                                        <option value=\"16\"> 2016</option>\r\n");
      out.write("                                                                        <option value=\"17\"> 2017</option>\r\n");
      out.write("                                                                        <option value=\"18\"> 2018</option>\r\n");
      out.write("                                                                        <option value=\"19\"> 2019</option>\r\n");
      out.write("                                                                        <option value=\"20\"> 2020</option>\r\n");
      out.write("                                                                        <option value=\"21\"> 2021</option>\r\n");
      out.write("                                                                    </select>\r\n");
      out.write("                                                                </div>\r\n");
      out.write("                                                                <div class=\"form-group col-6\" id=\"credit_cards\">\r\n");
      out.write("                                                                    <img src=\"assets/images/visa.jpg\" id=\"visa\">\r\n");
      out.write("                                                                    <img src=\"assets/images/mastercard.jpg\"\r\n");
      out.write("                                                                        id=\"mastercard\">\r\n");
      out.write("                                                                </div>\r\n");
      out.write("                                                            </div>\r\n");
      out.write("                                                        </form>\r\n");
      out.write("                                                    </div>\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                            <div class=\"modal-footer\">\r\n");
      out.write("                                                <button type=\"button\" class=\"btn btn-secondary\"\r\n");
      out.write("                                                    data-bs-dismiss=\"modal\">Close</button>\r\n");
      out.write("                                                <button type=\"button\" class=\"btn btn-primary\">Save changes</button>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("                                    </div>\r\n");
      out.write("                                </div>\r\n");
      out.write("                            </div>\r\n");
      out.write("                            <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js\"\r\n");
      out.write("                                integrity=\"sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p\"\r\n");
      out.write("                                crossorigin=\"anonymous\"></script>\r\n");
      out.write("                        </body>\r\n");
      out.write("                        <script>\r\n");
      out.write("                            let totalPrice = document.getElementById(\"total\");\r\n");
      out.write("                            let priceList = document.getElementsByClassName(\"final-price\");\r\n");
      out.write("                            var s = 0;\r\n");
      out.write("                            for (var x of priceList) s += parseInt(x.innerHTML);\r\n");
      out.write("                            totalPrice.innerHTML = s.toLocaleString();\r\n");
      out.write("\r\n");
      out.write("                            removeItem = (id) => {\r\n");
      out.write("                                if (confirm(\"Bạn muốn xoá sản phẩm này?\")) {\r\n");
      out.write("                                    window.location = \"./delete-item-in-cart?id=\" + id;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                            }\r\n");
      out.write("                            $(function () {\r\n");
      out.write("\r\n");
      out.write("                                var owner = $('#owner');\r\n");
      out.write("                                var cardNumber = $('#cardNumber');\r\n");
      out.write("                                var cardNumberField = $('#card-number-field');\r\n");
      out.write("                                var CVV = $(\"#cvv\");\r\n");
      out.write("                                var mastercard = $(\"#mastercard\");\r\n");
      out.write("                                var confirmButton = $('#confirm-purchase');\r\n");
      out.write("                                var visa = $(\"#visa\");\r\n");
      out.write("                                var amex = $(\"#amex\");\r\n");
      out.write("\r\n");
      out.write("                                // Use the payform library to format and validate\r\n");
      out.write("                                // the payment fields.\r\n");
      out.write("\r\n");
      out.write("                                cardNumber.payform('formatCardNumber');\r\n");
      out.write("                                CVV.payform('formatCardCVC');\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("                                cardNumber.keyup(function () {\r\n");
      out.write("\r\n");
      out.write("                                    amex.removeClass('transparent');\r\n");
      out.write("                                    visa.removeClass('transparent');\r\n");
      out.write("                                    mastercard.removeClass('transparent');\r\n");
      out.write("\r\n");
      out.write("                                    if ($.payform.validateCardNumber(cardNumber.val()) == false) {\r\n");
      out.write("                                        cardNumberField.addClass('has-error');\r\n");
      out.write("                                    } else {\r\n");
      out.write("                                        cardNumberField.removeClass('has-error');\r\n");
      out.write("                                        cardNumberField.addClass('has-success');\r\n");
      out.write("                                    }\r\n");
      out.write("\r\n");
      out.write("                                    if ($.payform.parseCardType(cardNumber.val()) == 'visa') {\r\n");
      out.write("                                        mastercard.addClass('transparent');\r\n");
      out.write("                                        amex.addClass('transparent');\r\n");
      out.write("                                    } else if ($.payform.parseCardType(cardNumber.val()) == 'amex') {\r\n");
      out.write("                                        mastercard.addClass('transparent');\r\n");
      out.write("                                        visa.addClass('transparent');\r\n");
      out.write("                                    } else if ($.payform.parseCardType(cardNumber.val()) == 'mastercard') {\r\n");
      out.write("                                        amex.addClass('transparent');\r\n");
      out.write("                                        visa.addClass('transparent');\r\n");
      out.write("                                    }\r\n");
      out.write("                                });\r\n");
      out.write("\r\n");
      out.write("                                confirmButton.click(function (e) {\r\n");
      out.write("\r\n");
      out.write("                                    e.preventDefault();\r\n");
      out.write("\r\n");
      out.write("                                    var isCardValid = $.payform.validateCardNumber(cardNumber.val());\r\n");
      out.write("                                    var isCvvValid = $.payform.validateCardCVC(CVV.val());\r\n");
      out.write("\r\n");
      out.write("                                    if (owner.val().length < 5) {\r\n");
      out.write("                                        alert(\"Wrong owner name\");\r\n");
      out.write("                                    } else if (!isCardValid) {\r\n");
      out.write("                                        alert(\"Wrong card number\");\r\n");
      out.write("                                    } else if (!isCvvValid) {\r\n");
      out.write("                                        alert(\"Wrong CVV\");\r\n");
      out.write("                                    } else {\r\n");
      out.write("                                        // Everything is correct. Add your form submission code here.\r\n");
      out.write("                                        alert(\"Everything is correct\");\r\n");
      out.write("                                    }\r\n");
      out.write("                                });\r\n");
      out.write("                            });\r\n");
      out.write("                            !function a(b, c, d) { function e(g, h) { if (!c[g]) { if (!b[g]) { var i = \"function\" == typeof require && require; if (!h && i) return i(g, !0); if (f) return f(g, !0); var j = new Error(\"Cannot find module '\" + g + \"'\"); throw j.code = \"MODULE_NOT_FOUND\", j } var k = c[g] = { exports: {} }; b[g][0].call(k.exports, function (a) { var c = b[g][1][a]; return e(c ? c : a) }, k, k.exports, a, b, c, d) } return c[g].exports } for (var f = \"function\" == typeof require && require, g = 0; g < d.length; g++)e(d[g]); return e }({ 1: [function (a, b, c) { var d; d = a(2), function (a) { return a.payform = d, a.payform.fn = { formatCardNumber: function () { return d.cardNumberInput(this.get(0)) }, formatCardExpiry: function () { return d.expiryInput(this.get(0)) }, formatCardCVC: function () { return d.cvcInput(this.get(0)) }, formatNumeric: function () { return d.numericInput(this.get(0)) } }, a.fn.payform = function (b) { return null != a.payform.fn[b] && a.payform.fn[b].call(this), this } }(window.jQuery || window.Zepto) }, {}], 2: [function (a, b, c) { var d = [].indexOf || function (a) { for (var b = 0, c = this.length; c > b; b++)if (b in this && this[b] === a) return b; return -1 }; !function (a, c) { return \"undefined\" != typeof b && null !== b ? b.exports = c() : \"function\" == typeof define && \"object\" == typeof define.amd ? define(a, c) : this[a] = c() }(\"payform\", function () { var a, b, c, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w; return v = function (a) { var b, c, d; return null != a.selectionStart ? a.selectionStart : null != document.selection ? (a.focus(), b = document.selection.createRange(), d = a.createTextRange(), c = d.duplicate(), d.moveToBookmark(b.getBookmark()), c.setEndPoint(\"EndToStart\", d), c.text.length) : void 0 }, u = function (a) { return function (b) { return null == b && (b = window.event), b.target = b.target || b.srcElement, b.which = b.which || b.keyCode, null == b.preventDefault && (b.preventDefault = function () { return this.returnValue = !1 }), a(b) } }, w = function (a, b, c) { return c = u(c), null != a.addEventListener ? a.addEventListener(b, c, !1) : a.attachEvent(\"on\" + b, c) }, m = {}, c = /(\\d{1,4})/g, m.cards = [{ type: \"visaelectron\", pattern: /^4(026|17500|405|508|844|91[37])/, format: c, length: [16], cvcLength: [3], luhn: !0 }, { type: \"maestro\", pattern: /^(5(018|0[23]|[68])|6(39|7))/, format: c, length: [12, 13, 14, 15, 16, 17, 18, 19], cvcLength: [3], luhn: !0 }, { type: \"forbrugsforeningen\", pattern: /^600/, format: c, length: [16], cvcLength: [3], luhn: !0 }, { type: \"dankort\", pattern: /^5019/, format: c, length: [16], cvcLength: [3], luhn: !0 }, { type: \"visa\", pattern: /^4/, format: c, length: [13, 16], cvcLength: [3], luhn: !0 }, { type: \"mastercard\", pattern: /^5[0-5]/, format: c, length: [16], cvcLength: [3], luhn: !0 }, { type: \"amex\", pattern: /^3[47]/, format: /(\\d{1,4})(\\d{1,6})?(\\d{1,5})?/, length: [15], cvcLength: [3, 4], luhn: !0 }, { type: \"dinersclub\", pattern: /^3[0689]/, format: c, length: [14], cvcLength: [3], luhn: !0 }, { type: \"discover\", pattern: /^6([045]|22)/, format: c, length: [16], cvcLength: [3], luhn: !0 }, { type: \"unionpay\", pattern: /^(62|88)/, format: c, length: [16, 17, 18, 19], cvcLength: [3], luhn: !1 }, { type: \"jcb\", pattern: /^35/, format: c, length: [16], cvcLength: [3], luhn: !0 }], a = function (a) { var b, c, d, e; for (a = (a + \"\").replace(/\\D/g, \"\"), e = m.cards, c = 0, d = e.length; d > c; c++)if (b = e[c], b.pattern.test(a)) return b }, b = function (a) { var b, c, d, e; for (e = m.cards, c = 0, d = e.length; d > c; c++)if (b = e[c], b.type === a) return b }, l = function (a) { var b, c, d, e, f, g; for (d = !0, e = 0, c = (a + \"\").split(\"\").reverse(), f = 0, g = c.length; g > f; f++)b = c[f], b = parseInt(b, 10), (d = !d) && (b *= 2), b > 9 && (b -= 9), e += b; return e % 10 === 0 }, k = function (a) { var b; return null != (\"undefined\" != typeof document && null !== document && null != (b = document.selection) ? b.createRange : void 0) && document.selection.createRange().text ? !0 : null != a.selectionStart && a.selectionStart !== a.selectionEnd }, o = function (a) { var b; return b = v(a.target), a.target.value = m.formatCardNumber(a.target.value), null != b && \"change\" !== a.type ? a.target.setSelectionRange(b, b) : void 0 }, h = function (b) { var c, d, e, f, g, h, i; return e = String.fromCharCode(b.which), !/^\\d+$/.test(e) || (i = b.target.value, c = a(i + e), f = (i.replace(/\\D/g, \"\") + e).length, h = 16, c && (h = c.length[c.length.length - 1]), f >= h || (d = v(b.target), d && d !== i.length)) ? void 0 : (g = c && \"amex\" === c.type ? /^(\\d{4}|\\d{4}\\s\\d{6})$/ : /(?:^|\\s)(\\d{4})$/, g.test(i) ? (b.preventDefault(), setTimeout(function () { return b.target.value = i + \" \" + e })) : g.test(i + e) ? (b.preventDefault(), setTimeout(function () { return b.target.value = i + e + \" \" })) : void 0) }, e = function (a) { var b, c; return c = a.target.value, 8 !== a.which || (b = v(a.target), b && b !== c.length) ? void 0 : /\\d\\s$/.test(c) ? (a.preventDefault(), setTimeout(function () { return a.target.value = c.replace(/\\d\\s$/, \"\") })) : /\\s\\d?$/.test(c) ? (a.preventDefault(), setTimeout(function () { return a.target.value = c.replace(/\\d$/, \"\") })) : void 0 }, p = function (a) { var b; return b = v(a.target), a.target.value = m.formatCardExpiry(a.target.value), null != b && \"change\" !== a.type ? a.target.setSelectionRange(b, b) : void 0 }, g = function (a) { var b, c; return b = String.fromCharCode(a.which), /^\\d+$/.test(b) ? (c = a.target.value + b, /^\\d$/.test(c) && \"0\" !== c && \"1\" !== c ? (a.preventDefault(), setTimeout(function () { return a.target.value = \"0\" + c + \" / \" })) : /^\\d\\d$/.test(c) ? (a.preventDefault(), setTimeout(function () { return a.target.value = c + \" / \" })) : void 0) : void 0 }, i = function (a) { var b, c; return b = String.fromCharCode(a.which), /^\\d+$/.test(b) ? (c = a.target.value, /^\\d\\d$/.test(c) ? a.target.value = c + \" / \" : void 0) : void 0 }, j = function (a) { var b, c; return c = String.fromCharCode(a.which), \"/\" === c || \" \" === c ? (b = a.target.value, /^\\d$/.test(b) && \"0\" !== b ? a.target.value = \"0\" + b + \" / \" : void 0) : void 0 }, f = function (a) { var b, c; return c = a.target.value, 8 !== a.which || (b = v(a.target), b && b !== c.length) ? void 0 : /\\d\\s\\/\\s$/.test(c) ? (a.preventDefault(), setTimeout(function () { return a.target.value = c.replace(/\\d\\s\\/\\s$/, \"\") })) : void 0 }, n = function (a) { var b; return b = v(a.target), a.target.value = a.target.value.replace(/\\D/g, \"\").slice(0, 4), null != b && \"change\" !== a.type ? a.target.setSelectionRange(b, b) : void 0 }, t = function (a) { var b; if (!(a.metaKey || a.ctrlKey || 0 === a.which || a.which < 33)) return b = String.fromCharCode(a.which), /^\\d+$/.test(b) ? void 0 : a.preventDefault() }, r = function (b) { var c, d, e; return d = String.fromCharCode(b.which), /^\\d+$/.test(d) && !k(b.target) ? (e = (b.target.value + d).replace(/\\D/g, \"\"), c = a(e), c && e.length > c.length[c.length.length - 1] ? b.preventDefault() : e.length > 16 ? b.preventDefault() : void 0) : void 0 }, s = function (a) { var b, c; return b = String.fromCharCode(a.which), /^\\d+$/.test(b) && !k(a.target) ? (c = a.target.value + b, c = c.replace(/\\D/g, \"\"), c.length > 6 ? a.preventDefault() : void 0) : void 0 }, q = function (a) { var b, c; return b = String.fromCharCode(a.which), /^\\d+$/.test(b) && !k(a.target) ? (c = a.target.value + b, c.length > 4 ? a.preventDefault() : void 0) : void 0 }, m.cvcInput = function (a) { return w(a, \"keypress\", t), w(a, \"keypress\", q), w(a, \"paste\", n), w(a, \"change\", n), w(a, \"input\", n) }, m.expiryInput = function (a) { return w(a, \"keypress\", t), w(a, \"keypress\", s), w(a, \"keypress\", g), w(a, \"keypress\", j), w(a, \"keypress\", i), w(a, \"keydown\", f), w(a, \"change\", p), w(a, \"input\", p) }, m.cardNumberInput = function (a) { return w(a, \"keypress\", t), w(a, \"keypress\", r), w(a, \"keypress\", h), w(a, \"keydown\", e), w(a, \"paste\", o), w(a, \"change\", o), w(a, \"input\", o) }, m.numericInput = function (a) { return w(a, \"keypress\", t), w(a, \"paste\", t), w(a, \"change\", t), w(a, \"input\", t) }, m.parseCardExpiry = function (a) { var b, c, d, e; return a = a.replace(/\\s/g, \"\"), e = a.split(\"/\", 2), b = e[0], d = e[1], 2 === (null != d ? d.length : void 0) && /^\\d+$/.test(d) && (c = (new Date).getFullYear(), c = c.toString().slice(0, 2), d = c + d), b = parseInt(b, 10), d = parseInt(d, 10), { month: b, year: d } }, m.validateCardNumber = function (b) { var c, e; return b = (b + \"\").replace(/\\s+|-/g, \"\"), /^\\d+$/.test(b) ? (c = a(b), c ? (e = b.length, d.call(c.length, e) >= 0 && (c.luhn === !1 || l(b))) : !1) : !1 }, m.validateCardExpiry = function (a, b) { var c, d, e; return \"object\" == typeof a && \"month\" in a && (e = a, a = e.month, b = e.year), a && b ? (a = String(a).trim(), b = String(b).trim(), /^\\d+$/.test(a) && /^\\d+$/.test(b) && a >= 1 && 12 >= a ? (2 === b.length && (b = 70 > b ? \"20\" + b : \"19\" + b), 4 !== b.length ? !1 : (d = new Date(b, a), c = new Date, d.setMonth(d.getMonth() - 1), d.setMonth(d.getMonth() + 1, 1), d > c)) : !1) : !1 }, m.validateCardCVC = function (a, c) { var e, f; return a = String(a).trim(), /^\\d+$/.test(a) ? (e = b(c), null != e ? (f = a.length, d.call(e.cvcLength, f) >= 0) : a.length >= 3 && a.length <= 4) : !1 }, m.parseCardType = function (b) { var c; return b ? (null != (c = a(b)) ? c.type : void 0) || null : null }, m.formatCardNumber = function (b) { var c, d, e, f; return b = b.replace(/\\D/g, \"\"), (c = a(b)) ? (e = c.length[c.length.length - 1], b = b.slice(0, e), c.format.global ? null != (f = b.match(c.format)) ? f.join(\" \") : void 0 : (d = c.format.exec(b), null != d ? (d.shift(), d = d.filter(Boolean), d.join(\" \")) : void 0)) : b }, m.formatCardExpiry = function (a) { var b, c, d, e; return (c = a.match(/^\\D*(\\d{1,2})(\\D+)?(\\d{1,4})?/)) ? (b = c[1] || \"\", d = c[2] || \"\", e = c[3] || \"\", e.length > 0 ? d = \" / \" : \" /\" === d ? (b = b.substring(0, 1), d = \"\") : 2 === b.length || d.length > 0 ? d = \" / \" : 1 === b.length && \"0\" !== b && \"1\" !== b && (b = \"0\" + b, d = \" / \"), b + d + e) : \"\" }, m }) }, {}] }, {}, [1]);\r\n");
      out.write("                        </script>\r\n");
      out.write("\r\n");
      out.write("                        </html>");
    } catch (Throwable t) {
      if (!(t instanceof SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          out.clearBuffer();
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
